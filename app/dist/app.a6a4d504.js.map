{"version":3,"sources":["src/templates.js","src/utils.js","src/JobSearch.js","src/app.js"],"names":["jobTemplate","job","currency","title","salary_max","location","display_name","description","redirect_url","extractFormData","form","Array","from","elements","reduce","acc","id","value","getCurrencySymbol","country","currencies","gb","us","au","ca","JobSearch","searchFormSelector","resultsContainerSelector","loadingElementSelector","searchForm","document","querySelector","resultsContainer","loadingElement","countryCode","setCurrencySymbol","fetch","then","results","json","toLowerCase","currencySymbol","addEventListener","event","preventDefault","startLoading","innerHTML","search","response","stopLoading","map","join","jobs","catch","classList","add","remove","jobSearch","setCountryCode","configureFormListener"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export const jobTemplate = (job, currency) => `\r\n<div class=\"card\">\r\n  <div class=\"card-body\">\r\n    <h4 class=\"card-title\">${job.title} up to ${currency}${job.salary_max}</h4>\r\n    <h5>${job.location.display_name}</h5>\r\n    <p class=\"card-text\">${job.description}</p>\r\n    <a href=\"${job.redirect_url}\" target=\"_blank\">View Job</a>\r\n  </div>\r\n</div>\r\n`;","export const extractFormData = form => Array\r\n  .from(form.elements)\r\n  .reduce((acc, {\r\n    id,\r\n    value\r\n  }) => ({\r\n    [id]: value,\r\n    ...acc\r\n  }), {});\r\n\r\nexport const getCurrencySymbol = country => {\r\n  const currencies = {\r\n    gb: 'Â£',\r\n    us: '$',\r\n    au: '$',\r\n    ca: '$',\r\n  };\r\n  return currencies[country];\r\n}","import {\r\n  jobTemplate\r\n} from './templates';\r\nimport {\r\n  extractFormData,\r\n  getCurrencySymbol\r\n} from './utils';\r\n\r\nexport class JobSearch {\r\n  constructor(\r\n    searchFormSelector,\r\n    resultsContainerSelector,\r\n    loadingElementSelector\r\n  ) {\r\n    this.searchForm = document.querySelector(searchFormSelector);\r\n    this.resultsContainer = document.querySelector(resultsContainerSelector);\r\n    this.loadingElement = document.querySelector(loadingElementSelector);\r\n  }\r\n\r\n  setCountryCode() {\r\n    this.countryCode = 'gb';\r\n    this.setCurrencySymbol();\r\n\r\n    fetch('http://ip-api.com/json')\r\n      .then((results) => results.json())\r\n      .then((results) => {\r\n        this.countryCode = results.countryCode.toLowerCase();\r\n        this.setCurrencySymbol();\r\n      });\r\n  }\r\n\r\n  setCurrencySymbol() {\r\n    this.currencySymbol = getCurrencySymbol(this.countryCode);\r\n  }\r\n\r\n  configureFormListener() {\r\n    this.searchForm.addEventListener('submit', (event) => {\r\n      event.preventDefault();\r\n      this.startLoading();\r\n      this.resultsContainer.innerHTML = '';\r\n      const {\r\n        search,\r\n        location\r\n      } = extractFormData(this.searchForm);\r\n      fetch(\r\n          `http://localhost:3000/?search=${search}&location=${location}&country=${this.countryCode}`\r\n        )\r\n        .then((response) => response.json())\r\n        .then(({\r\n          results\r\n        }) => {\r\n          this.stopLoading();\r\n          return results\r\n            .map((job) => jobTemplate(job, this.currencySymbol))\r\n            .join('');\r\n        })\r\n        .then((jobs) => (this.resultsContainer.innerHTML = jobs))\r\n        .catch(() => this.stopLoading());\r\n    });\r\n  }\r\n\r\n  startLoading() {\r\n    this.loadingElement.classList.add('loading');\r\n  }\r\n\r\n  stopLoading() {\r\n    this.loadingElement.classList.remove('loading');\r\n  }\r\n}","//Main\r\n\r\nimport {\r\n  JobSearch\r\n} from './JobSearch';\r\n\r\nconst jobSearch = new JobSearch(\r\n  '#search-form',\r\n  '.result-container',\r\n  '.loading-element'\r\n);\r\njobSearch.setCountryCode();\r\njobSearch.configureFormListener();"]}